import{d as P,x as A,u as z,r as o,s as R,c as F,a as r,o as f,b as k,w as c,e as l,f as s,g as L,p as O,_ as j,i as q}from"./index-6280b85b.js";import{u as G}from"./contentStore-c18c2769.js";import{v as H,w as J}from"./request-8476bf71.js";import{u as K}from"./useModal-a52d9158.js";import"./axios-c24e582b.js";const Q=O(" Change Password "),W=P({__name:"PageDataTableInternalUsers",setup(I){K();const{init:m,notify:T,close:Z,closeAll:ee}=A(),{t:V}=z(),i=o(10),_=o(null),p=o(null),v=o(null),n=o(!1),b=G();b.getInternalUsers();const{internalUsers:a}=R(b),g=o(1),M=u=>{_.value=a.value[u].id,n.value=!0},B=async()=>{v.value!==p.value?(m({message:"Password did not matched!",color:"danger"}),n.value=!0):(await H(_.value,p.value)).status==="Success"?(m({message:"Password has been updated",color:"info"}),n.value=!1):(m({message:"Something went wrong!",color:"danger"}),n.value=!0)},N=()=>{_.value=null,n.value=!1},S=F(()=>i.value&&i.value!==0?Math.ceil(a.value.length/i.value):a.value.length),y=async u=>{setTimeout(()=>{J(a.value[u].id,a.value[u].admin,a.value[u].employee)},500)},U=o([{key:"email",label:"Email"},{key:"first_name",label:"First Name"},{key:"middle_name",label:"Middle Name"},{key:"last_name",label:"Last Name"},{key:"employee",value:"Employee",tdClass:"items-center-c",thClass:"items-center-c"},{key:"admin",value:"Admin",tdClass:"items-center-c",thClass:"items-center-c"},{key:"actions",value:"Actions",tdClass:"items-center-c",thClass:"items-center-c"}]);return(u,t)=>{const h=r("VaSwitch"),x=r("VaButton"),D=r("VaDataTable"),E=r("VaPagination"),w=r("va-card"),C=r("va-input"),$=r("VaModal");return f(),k(w,{title:"Internal Users",class:"mb-8"},{default:c(()=>[l(a).constructor===Array?(f(),k(D,{key:0,"sticky-header":"",class:"custom-table va-table--striped",fields:U.value,items:l(a),columns:U.value,"per-page":i.value,"current-page":g.value},{"cell(employee)":c(({rowIndex:e})=>[s(h,{modelValue:l(a)[e].employee,"onUpdate:modelValue":[d=>l(a)[e].employee=d,d=>y(e)],color:"success"},null,8,["modelValue","onUpdate:modelValue"])]),"cell(admin)":c(({rowIndex:e})=>[s(h,{modelValue:l(a)[e].admin,"onUpdate:modelValue":[d=>l(a)[e].admin=d,d=>y(e)],color:"danger"},null,8,["modelValue","onUpdate:modelValue"])]),"cell(actions)":c(({rowIndex:e})=>[s(x,{color:"warning",size:"small",class:"mr-6 mb-2",onClick:d=>M(e)},{default:c(()=>[Q]),_:2},1032,["onClick"])]),_:1},8,["fields","items","columns","per-page","current-page"])):L("",!0),s(w,{title:"filter",class:"bg-white p-5 w-[100%]"},{default:c(()=>[s(E,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),"visible-pages":"10",pages:l(S)},null,8,["modelValue","pages"])]),_:1}),s($,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value=e),class:"modal-crud",title:"Change Password",size:"small",onOk:B,onCancel:N},{default:c(()=>[s(C,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),class:"mb-4",type:"password",label:l(V)("auth.password")},null,8,["modelValue","label"]),s(C,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),class:"mb-4",type:"password",label:l(V)("auth.confirm")},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1})}}});const X=j(W,[["__scopeId","data-v-6230b4f7"]]),Y={class:"dashboard"},ne=P({__name:"InternalUsers",setup(I){return o(),(m,T)=>(f(),q("div",Y,[s(X)]))}});export{ne as default};
