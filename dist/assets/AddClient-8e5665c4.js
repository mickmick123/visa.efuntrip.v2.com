import{C as _e}from"./CountriesList-75e00d68.js";import{d as Ye,s as Ve,u as ye,x as ge,r as o,m as te,a as _,o as r,i as J,f as a,w as d,p as k,t as P,e as g,j as t,b as Y,g as b,F as be,k as xe,y as De,z as Me,q as he,v as Ce,_ as ke}from"./index-6280b85b.js";import{h as p}from"./moment-a9aaa855.js";import{u as Ue}from"./contentStore-c18c2769.js";import{b as Ee}from"./request-8476bf71.js";import"./axios-c24e582b.js";const se=U=>(he("data-v-6218bbb4"),U=U(),Ce(),U),Se={class:"form-elements grid grid-cols-12 gap-6"},Ie={class:"grid grid-cols-12 gap-6"},we={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Be={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Te={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Ae={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Le={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Pe={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Fe={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Ge={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},Ne=se(()=>t("div",{class:"flex md:col-span-4 sm:col-span-6 col-span-12"},null,-1)),Re={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},We={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},$e=se(()=>t("div",{class:"flex md:col-span-4 sm:col-span-6 col-span-12"},null,-1)),je={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},ze={class:"flex md:col-span-4 sm:col-span-6 col-span-12"},qe={class:"grid grid-cols-4 gap-6"},He={class:"grid grid-cols-12 gap-6"},Oe={class:"flex md:col-span-12 col-span-12"},Je={class:"flex md:col-span-6 sm:col-span-6 col-span-12"},Ke={class:"flex md:col-span-6 sm:col-span-6 col-span-12"},Qe={class:"grid grid-cols-12 gap-6"},Xe={class:"flex md:col-span-6 col-span-12"},Ze={class:"flex md:col-span-6 col-span-12"},el={class:"grid grid-cols-6 gap-4"},ll={class:"col-end-10 col-span-2"},al=k(" Save Client "),ol=Ye({__name:"AddClient",setup(U){const E=Ue();E.getContactTypeList(),E.getBranches(),E.getGroups();const{contactTypeList:ne,branchList:de,groupList:ie}=Ve(E),{t:S}=ye(),{init:re,notify:tl,close:sl,closeAll:nl}=ge(),K=o(_e),m=o([{detail:"",type:""}]),I=o([]),w=o([]),F=o(""),G=o(""),B=o(""),T=o(""),N=o(""),A=o([]),R=o(""),W=o(""),$=o(""),j=o(""),z=o(""),q=o(""),H=o(""),Q=o(""),X=o(""),V=o(""),O=o(""),Z=o(""),ee=o(""),le=o(""),i=o(""),L=o(!1),ue=o(["9A","9G","TRV","CWV"]),pe=o(["Male","Female"]),ce=o(["Single","Married","Divorced","Widowed","Seperated"]),v=(s,e)=>{s==="first_expiration_date"?V.value=p(e).format("YYYY-MM-DD"):s==="extended_expiration_date"?X.value=p(e).format("YYYY-MM-DD"):s==="arrival_date"?O.value=p(e).format("YYYY-MM-DD"):s==="expiration_date"?Z.value=p(e).format("YYYY-MM-DD"):s==="icard_expiration_date"?ee.value=p(e).format("YYYY-MM-DD"):s==="icard_issue_date"?le.value=p(e).format("YYYY-MM-DD"):s==="passport_expiration_date"?Q.value=p(e).format("YYYY-MM-DD"):s==="birth_date"&&(W.value=p(e).format("YYYY-MM-DD"))},ae=()=>{m.value.push({detail:"",type:""})},oe=s=>{m.value.splice(s,1)},f=s=>{try{return p(s).format("YYYY-MM-DD")}catch{return""}};te(O,async s=>{i.value==="9A"&&(V.value=p(String(s)).add(59,"d").format("YYYY-MM-DD"),L.value=!0)}),te(i,async s=>{L.value=!1});const me=async()=>{try{m.value.length&&(m.value=m.value.map(s=>({detail:s.detail,type:s.type.value})))}catch(s){console.log(s)}try{V.value=p(V.value).format("YYYY-MM-DD")}catch(s){console.log(s)}if(B.value.trim()!==""&&T.value.trim()!==""&&W.value!==""){let s=[],e=[],y=[];I.value.length&&I.value.map(n=>{n.value&&s.push(n.value)}),w.value.length&&w.value.map(n=>{n.value&&e.push(n.value)}),A.value.length&&A.value.map(n=>{n&&y.push(n)});const u=await Ee(m.value,s,e,F.value,G.value,B.value,T.value,N.value,y,R.value,W.value,$.value,j.value,z.value,q.value,H.value,Q.value,X.value,V.value,O.value,Z.value,ee.value,le.value,[],i.value);if(u.status==="Success")De.push("/admin/clients/list");else{let n="";Object.keys(u.errors).forEach(function(c,x){n=u.errors[c],re({message:n.toString().replace('[ "',"").replace('" ]',""),color:"danger"})})}}};return(s,e)=>{const y=_("va-card-title"),u=_("va-input"),n=_("va-date-input"),c=_("va-select"),x=_("va-card-content"),M=_("va-card"),ve=_("VaTextarea"),h=_("VaButton"),fe=_("VaInput");return r(),J("div",Se,[a(M,{class:"col-span-12"},{default:d(()=>[a(y,null,{default:d(()=>[k(P(g(S)("client.personalInfo")),1)]),_:1}),a(x,null,{default:d(()=>[t("form",null,[t("div",Ie,[t("div",we,[a(u,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=l=>B.value=l),rules:[l=>!!l],placeholder:"Enter your first name",label:"*First name"},null,8,["modelValue","rules"])]),t("div",Be,[a(u,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=l=>N.value=l),placeholder:"Enter your middle name",label:"Middle name"},null,8,["modelValue"])]),t("div",Te,[a(u,{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=l=>T.value=l),rules:[l=>!!l],placeholder:"Enter your last name",label:"*Last name"},null,8,["modelValue","rules"])]),t("div",Ae,[a(n,{rules:[l=>!!l],format:f,label:"*Date of birth",placeholder:"YYYY-MM-DD","onClick:day":e[3]||(e[3]=l=>v("birth_date",l))},null,8,["rules"])]),t("div",Le,[a(c,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=l=>A.value=l),searchable:"",placeholder:"Please select",label:"Nationalities",options:K.value,multiple:""},null,8,["modelValue","options"])]),t("div",Pe,[a(c,{modelValue:R.value,"onUpdate:modelValue":e[5]||(e[5]=l=>R.value=l),searchable:"",placeholder:"Please select",label:"Birth country",options:K.value},null,8,["modelValue","options"])]),t("div",Fe,[a(c,{modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=l=>F.value=l),label:"Gender",placeholder:"Please select",options:pe.value},null,8,["modelValue","options"])]),t("div",Ge,[a(c,{modelValue:G.value,"onUpdate:modelValue":e[7]||(e[7]=l=>G.value=l),label:"Civil Status",placeholder:"Please select",options:ce.value},null,8,["modelValue","options"])]),Ne,t("div",Re,[a(u,{modelValue:z.value,"onUpdate:modelValue":e[8]||(e[8]=l=>z.value=l),placeholder:"Enter your height",label:"Height"},null,8,["modelValue"])]),t("div",We,[a(u,{modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=l=>q.value=l),placeholder:"Enter your weight",label:"Weight"},null,8,["modelValue"])]),$e,t("div",je,[a(u,{modelValue:H.value,"onUpdate:modelValue":e[10]||(e[10]=l=>H.value=l),placeholder:"Enter your passport",label:"Passport #"},null,8,["modelValue"])]),t("div",ze,[a(n,{format:f,placeholder:"YYYY-MM-DD",label:"Passport Valid Until","onClick:day":e[11]||(e[11]=l=>v("passport_expiration_date",l))})])])])]),_:1})]),_:1}),a(M,{class:"col-span-12"},{default:d(()=>[a(y,null,{default:d(()=>[k(P(g(S)("client.visaInfo")),1)]),_:1}),a(x,null,{default:d(()=>[t("form",null,[t("div",qe,[a(c,{modelValue:i.value,"onUpdate:modelValue":e[12]||(e[12]=l=>i.value=l),label:"Visa Type",placeholder:"Please select",options:ue.value,clearable:""},null,8,["modelValue","options"]),i.value==="9A"?(r(),Y(n,{key:0,format:f,label:"Arrival date",placeholder:"YYYY-MM-DD","onClick:day":e[13]||(e[13]=l=>v("arrival_date",l))})):b("",!0),i.value==="9A"&&!L.value||i.value==="CWV"?(r(),Y(n,{key:1,format:f,label:"First Expiration date",placeholder:"YYYY-MM-DD","onClick:day":e[14]||(e[14]=l=>v("first_expiration_date",l))})):b("",!0),i.value==="9A"&&L.value?(r(),Y(n,{key:2,modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=l=>V.value=l),format:f,label:"First Expiration date",placeholder:"YYYY-MM-DD","onClick:day":e[16]||(e[16]=l=>v("first_expiration_date",l))},null,8,["modelValue"])):b("",!0),i.value==="9A"?(r(),Y(n,{key:3,format:f,label:"Extended Expiration date",placeholder:"YYYY-MM-DD","onClick:day":e[17]||(e[17]=l=>v("extended_expiration_date",l))})):b("",!0),i.value==="9G"||i.value==="TRV"?(r(),Y(n,{key:4,format:f,label:"Visa Expiration Date",placeholder:"YYYY-MM-DD","onClick:day":e[18]||(e[18]=l=>v("expiration_date",l))})):b("",!0),i.value==="9G"||i.value==="TRV"?(r(),Y(n,{key:5,format:f,label:"I-Card date issued",placeholder:"YYYY-MM-DD","onClick:day":e[19]||(e[19]=l=>v("icard_issue_date",l))})):b("",!0),i.value==="9G"||i.value==="TRV"?(r(),Y(n,{key:6,format:f,label:"I-Card Expiration date",placeholder:"YYYY-MM-DD","onClick:day":e[20]||(e[20]=l=>v("icard_expiration_date",l))})):b("",!0)])])]),_:1})]),_:1}),a(M,{class:"col-span-12"},{default:d(()=>[a(y,null,{default:d(()=>[k(P(g(S)("client.contactInfo")),1)]),_:1}),a(x,null,{default:d(()=>[t("form",null,[t("div",He,[t("div",Oe,[a(ve,{modelValue:$.value,"onUpdate:modelValue":e[21]||(e[21]=l=>$.value=l),label:"Address",placeholder:"Enter your address"},null,8,["modelValue"])]),t("div",Je,[a(u,{modelValue:j.value,"onUpdate:modelValue":e[22]||(e[22]=l=>j.value=l),type:"email",label:"Email",placeholder:"Email address"},null,8,["modelValue"])]),(r(!0),J(be,null,xe(m.value,(l,D)=>(r(),J("div",{key:D,class:"md:col-span-12 sm:col-span-12 col-span-12 grid-cols-12 gap-6 grid"},[t("div",Ke,[a(fe,{modelValue:l.detail,"onUpdate:modelValue":C=>l.detail=C,class:"mb-6 with-inner-select",label:l.type===""?"Contact information":`Contact information (${l.type.toString().toUpperCase()})`,placeholder:"Enter contact information"},Me({prependInner:d(()=>[a(c,{modelValue:l.type,"onUpdate:modelValue":C=>l.type=C,class:"inner-select",placeholder:"Select",options:g(ne)},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},[D===m.value.length-1&&D!==0?{name:"append",fn:d(()=>[a(h,{icon:"add",color:"primary","icon-color":"#ffffff",class:"ml-3 rounded-sm",onClick:e[23]||(e[23]=()=>ae())}),a(h,{icon:"clear",color:"danger","icon-color":"#ffffff",class:"ml-3 rounded-sm",onClick:C=>oe(D)},null,8,["onClick"])])}:{name:"append",fn:d(()=>[D===0&&m.value.length-1===0?(r(),Y(h,{key:0,icon:"add",color:"primary","icon-color":"#ffffff",class:"ml-3 rounded-sm",onClick:e[24]||(e[24]=()=>ae())})):(r(),Y(h,{key:1,icon:"clear",color:"danger","icon-color":"#ffffff",class:"ml-3 rounded-sm",onClick:C=>oe(D)},null,8,["onClick"]))])}]),1032,["modelValue","onUpdate:modelValue","label"])])]))),128))])])]),_:1})]),_:1}),a(M,{class:"col-span-12"},{default:d(()=>[a(y,null,{default:d(()=>[k(P(g(S)("client.accountInfo")),1)]),_:1}),a(x,null,{default:d(()=>[t("form",null,[t("div",Qe,[t("div",Xe,[a(c,{modelValue:I.value,"onUpdate:modelValue":e[25]||(e[25]=l=>I.value=l),multiple:"",label:"*Branches",placeholder:"Please select",options:g(de)},null,8,["modelValue","options"])]),t("div",Ze,[a(c,{modelValue:w.value,"onUpdate:modelValue":e[26]||(e[26]=l=>w.value=l),multiple:"",label:"Group",placeholder:"Please select",options:g(ie)},null,8,["modelValue","options"])])])])]),_:1})]),_:1}),a(M,{class:"col-span-12"},{default:d(()=>[a(x,null,{default:d(()=>[t("div",el,[t("div",ll,[a(h,{size:"medium",class:"rounded-sm",onClick:e[27]||(e[27]=()=>me())},{default:d(()=>[al]),_:1})])])]),_:1})]),_:1})])}}});const ml=ke(ol,[["__scopeId","data-v-6218bbb4"]]);export{ml as default};
